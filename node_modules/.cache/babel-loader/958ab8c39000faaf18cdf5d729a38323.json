{"ast":null,"code":"import _objectSpread from \"D:\\\\firebase-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"D:\\\\firebase-app\\\\src\\\\Components\\\\Dashboard.js\";\nimport React from 'react';\nimport { fetch } from '../Fetches';\nimport Homepage from './Homepage';\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.fetchData = async () => {\n      let a = await fetch();\n      await console.log('fetch_over');\n      await a.forEach(async doc => {\n        await this.state.products.push(_objectSpread({}, doc.data(), {\n          id: doc.id\n        }));\n      });\n      (await this.state.products.length) !== 0 && this.setState({\n        isloading: ''\n      });\n      (await a.size) === 0 && this.setState({\n        isloading: 'serverError'\n      });\n    };\n\n    this.addone = async (id, num) => {\n      if (!(this.state.selected_items[id].req - 1 < 0)) console.log('addone', this.state.selected_items[id].req + 1);\n      let a = Object.assign({}, this.state.selected_items, _objectSpread({}, this.state.selected_items, {\n        [id]: _objectSpread({}, this.state.selected_items[id], {\n          req: this.state.selected_items[id].req + num,\n          totPrice: this.state.products.filter(i => i.id === id).map(i => i.Price)[0] * (this.state.selected_items[id].req + 1)\n        })\n      }));\n      await this.setState({\n        selected_items: a\n      });\n      await this.tot();\n    };\n\n    this.rmone = async (id, num) => {\n      console.log('rmone', this.state.selected_items[id].req - 1);\n      let a = Object.assign({}, this.state.selected_items, _objectSpread({}, this.state.selected_items, {\n        [id]: _objectSpread({}, this.state.selected_items[id], {\n          req: this.state.selected_items[id].req + num,\n          totPrice: this.state.products.filter(i => i.id === id).map(i => i.Price)[0] * (this.state.selected_items[id].req - 1)\n        })\n      }));\n      await this.setState({\n        selected_items: a\n      });\n      await this.tot();\n    };\n\n    this.change = async e => {\n      let name = e.target.id;\n      let value = e.target.value;\n      if (+value === 0) this.delete(e);\n      let a = Object.assign({}, this.state.selected_items, _objectSpread({}, this.state.selected_items, {\n        [name]: _objectSpread({}, this.state.selected_items[name], {\n          req: +value,\n          totPrice: +this.state.products.filter(i => i.Name === name).map(i => i.Price)[0] * value\n        })\n      }));\n      await this.setState({\n        selected_items: a\n      });\n      await this.tot();\n    };\n\n    this.add = async e => {\n      let a = e.target.id;\n      let item = this.state.products.filter(i => i.Name === a);\n\n      if (a !== '') {\n        if (!this.state.items.includes(a)) {\n          console.log('Added', e.target.id);\n          this.setState(prev => {\n            return {\n              selected_items: _objectSpread({}, prev.selected_items, {\n                [a]: {\n                  req: 1,\n                  totavail: +item.map(i => i.Avail)[0],\n                  id: this.state.products.filter(i => i.Name === a).map(i => i.id)[0],\n                  totPrice: +item.map(i => i.Price)[0],\n                  price: +item.map(i => i.Price)[0]\n                }\n              })\n            };\n          });\n          await this.setState({\n            items: [...this.state.items, a]\n          });\n          await this.tot();\n        }\n      }\n    };\n\n    this.tot = () => {\n      let a = this.state.items.length !== 0 ? this.state.items.map(i => {\n        return this.state.selected_items[i].totPrice;\n      }).reduce(this.summation) : 0;\n      this.setState({\n        totPrice: a\n      });\n    };\n\n    this.delete = async e => {\n      let name = e.target.id;\n      let res = Object.assign({}, this.state.selected_items);\n      console.log(res);\n      delete res[name];\n      console.log(res);\n      await this.setState({\n        items: this.state.items.filter(i => i !== name)\n      });\n      await this.setState({\n        selected_items: res\n      });\n      await this.tot();\n    };\n\n    this.summation = (a, b) => a + b;\n\n    this.state = {\n      products: [],\n      selected_items: [],\n      items: [],\n      totPrice: 0,\n      isloading: 'Loading...'\n    };\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  render() {\n    return React.createElement(Homepage, {\n      state: this.state,\n      add: this.add,\n      change: this.change,\n      tot: this.tot,\n      delete: this.delete,\n      addone: this.addone,\n      rmone: this.rmone,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["D:\\firebase-app\\src\\Components\\Dashboard.js"],"names":["React","fetch","Homepage","Dashboard","Component","constructor","props","fetchData","a","console","log","forEach","doc","state","products","push","data","id","length","setState","isloading","size","addone","num","selected_items","req","Object","assign","totPrice","filter","i","map","Price","tot","rmone","change","e","name","target","value","delete","Name","add","item","items","includes","prev","totavail","Avail","price","reduce","summation","res","b","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { fetch } from '../Fetches';\r\nimport Homepage from './Homepage';\r\n\r\nclass Dashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      selected_items: [],\r\n      items: [],\r\n      totPrice: 0,\r\n      isloading: 'Loading...'\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.fetchData();\r\n  }\r\n  fetchData = async () => {\r\n    let a = await fetch();\r\n    await console.log('fetch_over');\r\n    await a.forEach(async doc => {\r\n      await this.state.products.push({ ...doc.data(), id: doc.id });\r\n    });\r\n    (await this.state.products.length) !== 0 &&\r\n      this.setState({ isloading: '' });\r\n    (await a.size) === 0 && this.setState({ isloading: 'serverError' });\r\n  };\r\n  addone = async (id, num) => {\r\n    if (!(this.state.selected_items[id].req - 1 < 0))\r\n      console.log('addone', this.state.selected_items[id].req + 1);\r\n    let a = Object.assign({}, this.state.selected_items, {\r\n      ...this.state.selected_items,\r\n      [id]: {\r\n        ...this.state.selected_items[id],\r\n        req: this.state.selected_items[id].req + num,\r\n        totPrice:\r\n          this.state.products.filter(i => i.id === id).map(i => i.Price)[0] *\r\n          (this.state.selected_items[id].req + 1)\r\n      }\r\n    });\r\n    await this.setState({ selected_items: a });\r\n    await this.tot();\r\n  };\r\n  rmone = async (id, num) => {\r\n    console.log('rmone', this.state.selected_items[id].req - 1);\r\n    let a = Object.assign({}, this.state.selected_items, {\r\n      ...this.state.selected_items,\r\n      [id]: {\r\n        ...this.state.selected_items[id],\r\n        req: this.state.selected_items[id].req + num,\r\n        totPrice:\r\n          this.state.products.filter(i => i.id === id).map(i => i.Price)[0] *\r\n          (this.state.selected_items[id].req - 1)\r\n      }\r\n    });\r\n    await this.setState({ selected_items: a });\r\n    await this.tot();\r\n  };\r\n  change = async e => {\r\n    let name = e.target.id;\r\n    let value = e.target.value;\r\n    if (+value === 0) this.delete(e);\r\n    let a = Object.assign({}, this.state.selected_items, {\r\n      ...this.state.selected_items,\r\n      [name]: {\r\n        ...this.state.selected_items[name],\r\n        req: +value,\r\n        totPrice:\r\n          +this.state.products\r\n            .filter(i => i.Name === name)\r\n            .map(i => i.Price)[0] * value\r\n      }\r\n    });\r\n    await this.setState({ selected_items: a });\r\n    await this.tot();\r\n  };\r\n  add = async e => {\r\n    let a = e.target.id;\r\n    let item = this.state.products.filter(i => i.Name === a);\r\n    if (a !== '') {\r\n      if (!this.state.items.includes(a)) {\r\n        console.log('Added', e.target.id);\r\n        this.setState(prev => {\r\n          return {\r\n            selected_items: {\r\n              ...prev.selected_items,\r\n              [a]: {\r\n                req: 1,\r\n                totavail: +item.map(i => i.Avail)[0],\r\n                id: this.state.products\r\n                  .filter(i => i.Name === a)\r\n                  .map(i => i.id)[0],\r\n                totPrice: +item.map(i => i.Price)[0],\r\n                price: +item.map(i => i.Price)[0]\r\n              }\r\n            }\r\n          };\r\n        });\r\n        await this.setState({\r\n          items: [...this.state.items, a]\r\n        });\r\n        await this.tot();\r\n      }\r\n    }\r\n  };\r\n  tot = () => {\r\n    let a =\r\n      this.state.items.length !== 0\r\n        ? this.state.items\r\n            .map(i => {\r\n              return this.state.selected_items[i].totPrice;\r\n            })\r\n            .reduce(this.summation)\r\n        : 0;\r\n    this.setState({ totPrice: a });\r\n  };\r\n  delete = async e => {\r\n    let name = e.target.id;\r\n    let res = Object.assign({}, this.state.selected_items);\r\n    console.log(res);\r\n    delete res[name];\r\n    console.log(res);\r\n    await this.setState({ items: this.state.items.filter(i => i !== name) });\r\n    await this.setState({ selected_items: res });\r\n    await this.tot();\r\n  };\r\n  summation = (a, b) => a + b;\r\n  render() {\r\n    return (\r\n      <Homepage\r\n        state={this.state}\r\n        add={this.add}\r\n        change={this.change}\r\n        tot={this.tot}\r\n        delete={this.delete}\r\n        addone={this.addone}\r\n        rmone={this.rmone}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}