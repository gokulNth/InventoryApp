{"ast":null,"code":"import _objectSpread from \"D:\\\\firebase-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport firebase from 'firebase';\nvar firebaseConfig = {\n  apiKey: 'AIzaSyAMXvz4AD4bx1NvJchOugf1uYvPhf8xBiA',\n  authDomain: 'test-1528871171306.firebaseapp.com',\n  databaseURL: 'https://test-1528871171306.firebaseio.com',\n  projectId: 'test-1528871171306',\n  storageBucket: 'test-1528871171306.appspot.com',\n  messagingSenderId: '791882157170',\n  appId: '1:791882157170:web:093a1485e8da828a'\n}; // Initialize Firebase\n\nfirebase.initializeApp(firebaseConfig);\nvar firestore = firebase.firestore();\nconst docRef = firestore.collection('Products');\n\nconst fetch = async () => {\n  await console.log('in fetch');\n  return await docRef.get().then(async querySnapshot => {\n    return await querySnapshot;\n  }).catch(err => {\n    console.error('Error Occured', err);\n    return err;\n  });\n};\n\nconst addnew = async state => {\n  let a = 0;\n  await docRef.get().then(async querySnapshot => {\n    await querySnapshot.forEach(async doc => {\n      a = await +doc.id;\n    });\n  });\n  await ++a;\n  let data = {\n    Avail: state.Avail,\n    DetailAvail: {\n      [new Date().toDateString().slice(4)]: state.Avail\n    },\n    Name: state.Name,\n    Price: state.Price\n  };\n  await docRef.doc(a.toString()).set(data);\n  await console.log('added');\n};\n\nconst fetchDetailAvail = async state => {\n  return await docRef.doc(state.id).get().then(async querySnapshot => {\n    return await querySnapshot.data().DetailAvail;\n  });\n};\n\nconst add = async (state, history) => {\n  let a = await docRef.doc(state.id).get().then(async querySnapshot => {\n    return await querySnapshot.data().Avail;\n  });\n  let data = {\n    [state.date]: state.num\n  };\n  let b = await docRef.doc(state.id).get().then(async querySnapshot => {\n    return await querySnapshot.data().DetailAvail;\n  });\n  let c = await _objectSpread({}, b, data);\n  await docRef.doc(state.id).update('DetailAvail', c).then(() => console.log('added'));\n  await docRef.doc(state.id).update('Avail', a + +state.num).then(() => console.log('added'));\n  await history.push('/');\n};\n\nconst update = async (state, history) => {\n  state.all.map(async i => {\n    return await docRef.doc(state.item[i].id).update('Avail', state.item[i].totavail - state.item[i].req);\n  });\n  await history.push('/');\n};\n\nexport { fetch, update, add, fetchDetailAvail, addnew };","map":{"version":3,"sources":["D:\\firebase-app\\src\\Fetches.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","firestore","docRef","collection","fetch","console","log","get","then","querySnapshot","catch","err","error","addnew","state","a","forEach","doc","id","data","Avail","DetailAvail","Date","toDateString","slice","Name","Price","toString","set","fetchDetailAvail","add","history","date","num","b","c","update","push","all","map","i","item","totavail","req"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\r\n\r\nvar firebaseConfig = {\r\n  apiKey: 'AIzaSyAMXvz4AD4bx1NvJchOugf1uYvPhf8xBiA',\r\n  authDomain: 'test-1528871171306.firebaseapp.com',\r\n  databaseURL: 'https://test-1528871171306.firebaseio.com',\r\n  projectId: 'test-1528871171306',\r\n  storageBucket: 'test-1528871171306.appspot.com',\r\n  messagingSenderId: '791882157170',\r\n  appId: '1:791882157170:web:093a1485e8da828a'\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nvar firestore = firebase.firestore();\r\nconst docRef = firestore.collection('Products');\r\n\r\nconst fetch = async () => {\r\n  await console.log('in fetch');\r\n  return await docRef\r\n    .get()\r\n    .then(async querySnapshot => {\r\n      return await querySnapshot;\r\n    })\r\n    .catch(err => {\r\n      console.error('Error Occured', err);\r\n      return err;\r\n    });\r\n};\r\n\r\nconst addnew = async state => {\r\n  let a = 0;\r\n  await docRef.get().then(async querySnapshot => {\r\n    await querySnapshot.forEach(async doc => {\r\n      a = await +doc.id;\r\n    });\r\n  });\r\n  await ++a;\r\n  let data = {\r\n    Avail: state.Avail,\r\n    DetailAvail: { [new Date().toDateString().slice(4)]: state.Avail },\r\n    Name: state.Name,\r\n    Price: state.Price\r\n  };\r\n  await docRef.doc(a.toString()).set(data);\r\n  await console.log('added');\r\n};\r\n\r\nconst fetchDetailAvail = async state => {\r\n  return await docRef\r\n    .doc(state.id)\r\n    .get()\r\n    .then(async querySnapshot => {\r\n      return await querySnapshot.data().DetailAvail;\r\n    });\r\n};\r\n\r\nconst add = async (state, history) => {\r\n  let a = await docRef\r\n    .doc(state.id)\r\n    .get()\r\n    .then(async querySnapshot => {\r\n      return await querySnapshot.data().Avail;\r\n    });\r\n  let data = { [state.date]: state.num };\r\n  let b = await docRef\r\n    .doc(state.id)\r\n    .get()\r\n    .then(async querySnapshot => {\r\n      return await querySnapshot.data().DetailAvail;\r\n    });\r\n  let c = await { ...b, ...data };\r\n  await docRef\r\n    .doc(state.id)\r\n    .update('DetailAvail', c)\r\n    .then(() => console.log('added'));\r\n  await docRef\r\n    .doc(state.id)\r\n    .update('Avail', a + +state.num)\r\n    .then(() => console.log('added'));\r\n  await history.push('/');\r\n};\r\n\r\nconst update = async (state, history) => {\r\n  state.all.map(async i => {\r\n    return await docRef\r\n      .doc(state.item[i].id)\r\n      .update('Avail', state.item[i].totavail - state.item[i].req);\r\n  });\r\n  await history.push('/');\r\n};\r\n\r\nexport { fetch, update, add, fetchDetailAvail, addnew };\r\n"]},"metadata":{},"sourceType":"module"}