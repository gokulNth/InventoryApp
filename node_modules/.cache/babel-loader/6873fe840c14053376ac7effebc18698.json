{"ast":null,"code":"import _objectSpread from \"D:\\\\firebase-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"D:\\\\firebase-app\\\\src\\\\Components\\\\Pages\\\\Dashboard.js\";\nimport React from 'react';\nimport { fetch } from '../../Fetches';\nimport Homepage from '../Layouts/Homepage';\n\nclass Dashboard extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.check = () => {\n      this.fetchData();\n    };\n\n    this.fetchData = async () => {\n      let a = await fetch();\n      await console.log('fetch_over');\n      await a.forEach(async doc => {\n        await this.state.products.push(_objectSpread({}, doc.data(), {\n          id: doc.id\n        }));\n      });\n      (await this.state.products.length) !== 0 && this.setState({\n        isloading: ''\n      });\n      let srt = await this.state.products.sort((a, b) => a.Avail - b.Avail);\n      await this.setState({\n        products: srt\n      });\n      (await a.size) === 0 && this.setState({\n        isloading: 'serverError'\n      });\n      (await this.state.isloading) === 'serverError' && this.check();\n    };\n\n    this.one = async e => {\n      let _e$target = e.target,\n          value = _e$target.value,\n          id = _e$target.id;\n      console.log(value, id); // if (\n      //   this.state.selected_items[name].req + num >\n      //   this.state.products.filter(i => i.Name === name).map(i => i.Avail)[0]\n      // ) {\n      //   alert('Quantity Exceeded');\n      // } else if (!(this.state.selected_items[name].req + num < 0)) {\n      //   if (this.state.selected_items[name].req + num === 0) {\n      //     this.delete(e);\n      //   }\n      //   let a = Object.assign({}, this.state.selected_items, {\n      //     ...this.state.selected_items,\n      //     [name]: {\n      //       ...this.state.selected_items[name],\n      //       req: this.state.selected_items[name].req + num,\n      //       totPrice:\n      //         +this.state.products\n      //           .filter(i => i.Name === name)\n      //           .map(i => i.Price)[0] *\n      //         (this.state.selected_items[name].req + num)\n      //     }\n      //   });\n      //   await this.setState({ selected_items: a });\n      //   await this.tot();\n      // }\n    };\n\n    this.add = async e => {\n      let a = await e.target.id;\n      let item = await this.state.products.filter(i => i.Name === a);\n\n      if (a !== '' && item[0].Avail > 0) {\n        if (!this.state.items.includes(a)) {\n          this.setState(prev => {\n            return {\n              selected_items: _objectSpread({}, prev.selected_items, {\n                [a]: {\n                  req: 1,\n                  totavail: +item.map(i => i.Avail)[0],\n                  id: this.state.products.filter(i => i.Name === a).map(i => i.id)[0],\n                  totPrice: +item.map(i => i.Price)[0],\n                  price: +item.map(i => i.Price)[0]\n                }\n              })\n            };\n          });\n          await this.setState({\n            items: [...this.state.items, a]\n          });\n          await this.tot();\n          await this.setState({\n            list: []\n          });\n        }\n      } else alert('select valid product');\n    };\n\n    this.tot = () => {\n      let a = this.state.items.length !== 0 ? this.state.items.map(i => {\n        return this.state.selected_items[i].totPrice;\n      }).reduce(this.summation) : 0;\n      this.setState({\n        totPrice: a\n      });\n    };\n\n    this.delete = async e => {\n      let name = e.target.id;\n      let res = Object.assign({}, this.state.selected_items);\n      delete res[name];\n      await this.setState({\n        items: this.state.items.filter(i => i !== name)\n      });\n      await this.setState({\n        selected_items: res\n      });\n      await this.tot();\n    };\n\n    this.summation = (a, b) => a + b;\n\n    this.search = e => {\n      let list = [];\n      this.state.products.filter(i => i.Name.toLowerCase().includes(e.target.value)).map(i => {\n        return list.push(i);\n      });\n      e.target.value.length !== 0 && this.setState({\n        list: list\n      });\n      e.target.value.length === 0 && this.setState({\n        list: []\n      });\n    };\n\n    this.state = {\n      products: [],\n      selected_items: [],\n      items: [],\n      totPrice: 0,\n      isloading: 'Loading...',\n      list: []\n    };\n  }\n\n  componentDidMount() {\n    this.props.location.state && this.setState({\n      selected_items: this.props.location.state.selected_items,\n      items: this.props.location.state.items,\n      totPrice: this.props.location.state.totPrice\n    });\n    this.fetchData();\n  }\n\n  render() {\n    return React.createElement(Homepage, {\n      state: this.state,\n      add: this.add,\n      tot: this.tot,\n      delete: this.delete,\n      one: this.one,\n      search: this.search,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["D:\\firebase-app\\src\\Components\\Pages\\Dashboard.js"],"names":["React","fetch","Homepage","Dashboard","Component","constructor","props","check","fetchData","a","console","log","forEach","doc","state","products","push","data","id","length","setState","isloading","srt","sort","b","Avail","size","one","e","target","value","add","item","filter","i","Name","items","includes","prev","selected_items","req","totavail","map","totPrice","Price","price","tot","list","alert","reduce","summation","delete","name","res","Object","assign","search","toLowerCase","componentDidMount","location","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,OAAOC,QAAP,MAAqB,qBAArB;;AAEA,MAAMC,SAAN,SAAwBH,KAAK,CAACI,SAA9B,CAAwC;AACtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,SAoBnBC,KApBmB,GAoBX,MAAM;AACZ,WAAKC,SAAL;AACD,KAtBkB;;AAAA,SAuBnBA,SAvBmB,GAuBP,YAAY;AACtB,UAAIC,CAAC,GAAG,MAAMR,KAAK,EAAnB;AACA,YAAMS,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAN;AACA,YAAMF,CAAC,CAACG,OAAF,CAAU,MAAMC,GAAN,IAAa;AAC3B,cAAM,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,IAApB,mBAA8BH,GAAG,CAACI,IAAJ,EAA9B;AAA0CC,UAAAA,EAAE,EAAEL,GAAG,CAACK;AAAlD,WAAN;AACD,OAFK,CAAN;AAGA,OAAC,MAAM,KAAKJ,KAAL,CAAWC,QAAX,CAAoBI,MAA3B,MAAuC,CAAvC,IACE,KAAKC,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd,CADF;AAEA,UAAIC,GAAG,GAAG,MAAM,KAAKR,KAAL,CAAWC,QAAX,CAAoBQ,IAApB,CAAyB,CAACd,CAAD,EAAIe,CAAJ,KAAUf,CAAC,CAACgB,KAAF,GAAUD,CAAC,CAACC,KAA/C,CAAhB;AACA,YAAM,KAAKL,QAAL,CAAc;AAAEL,QAAAA,QAAQ,EAAEO;AAAZ,OAAd,CAAN;AACA,OAAC,MAAMb,CAAC,CAACiB,IAAT,MAAmB,CAAnB,IAAwB,KAAKN,QAAL,CAAc;AAAEC,QAAAA,SAAS,EAAE;AAAb,OAAd,CAAxB;AACA,OAAC,MAAM,KAAKP,KAAL,CAAWO,SAAlB,MAAiC,aAAjC,IAAkD,KAAKd,KAAL,EAAlD;AACD,KAnCkB;;AAAA,SAoCnBoB,GApCmB,GAoCb,MAAMC,CAAN,IAAW;AAAA,sBACKA,CAAC,CAACC,MADP;AAAA,UACTC,KADS,aACTA,KADS;AAAA,UACFZ,EADE,aACFA,EADE;AAEfR,MAAAA,OAAO,CAACC,GAAR,CAAYmB,KAAZ,EAAmBZ,EAAnB,EAFe,CAGf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA/DkB;;AAAA,SAgEnBa,GAhEmB,GAgEb,MAAMH,CAAN,IAAW;AACf,UAAInB,CAAC,GAAG,MAAMmB,CAAC,CAACC,MAAF,CAASX,EAAvB;AACA,UAAIc,IAAI,GAAG,MAAM,KAAKlB,KAAL,CAAWC,QAAX,CAAoBkB,MAApB,CAA2BC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW1B,CAA3C,CAAjB;;AACA,UAAIA,CAAC,KAAK,EAAN,IAAYuB,IAAI,CAAC,CAAD,CAAJ,CAAQP,KAAR,GAAgB,CAAhC,EAAmC;AACjC,YAAI,CAAC,KAAKX,KAAL,CAAWsB,KAAX,CAAiBC,QAAjB,CAA0B5B,CAA1B,CAAL,EAAmC;AACjC,eAAKW,QAAL,CAAckB,IAAI,IAAI;AACpB,mBAAO;AACLC,cAAAA,cAAc,oBACTD,IAAI,CAACC,cADI;AAEZ,iBAAC9B,CAAD,GAAK;AACH+B,kBAAAA,GAAG,EAAE,CADF;AAEHC,kBAAAA,QAAQ,EAAE,CAACT,IAAI,CAACU,GAAL,CAASR,CAAC,IAAIA,CAAC,CAACT,KAAhB,EAAuB,CAAvB,CAFR;AAGHP,kBAAAA,EAAE,EAAE,KAAKJ,KAAL,CAAWC,QAAX,CACDkB,MADC,CACMC,CAAC,IAAIA,CAAC,CAACC,IAAF,KAAW1B,CADtB,EAEDiC,GAFC,CAEGR,CAAC,IAAIA,CAAC,CAAChB,EAFV,EAEc,CAFd,CAHD;AAMHyB,kBAAAA,QAAQ,EAAE,CAACX,IAAI,CAACU,GAAL,CAASR,CAAC,IAAIA,CAAC,CAACU,KAAhB,EAAuB,CAAvB,CANR;AAOHC,kBAAAA,KAAK,EAAE,CAACb,IAAI,CAACU,GAAL,CAASR,CAAC,IAAIA,CAAC,CAACU,KAAhB,EAAuB,CAAvB;AAPL;AAFO;AADT,aAAP;AAcD,WAfD;AAgBA,gBAAM,KAAKxB,QAAL,CAAc;AAClBgB,YAAAA,KAAK,EAAE,CAAC,GAAG,KAAKtB,KAAL,CAAWsB,KAAf,EAAsB3B,CAAtB;AADW,WAAd,CAAN;AAGA,gBAAM,KAAKqC,GAAL,EAAN;AACA,gBAAM,KAAK1B,QAAL,CAAc;AAAE2B,YAAAA,IAAI,EAAE;AAAR,WAAd,CAAN;AACD;AACF,OAxBD,MAwBOC,KAAK,CAAC,sBAAD,CAAL;AACR,KA5FkB;;AAAA,SA6FnBF,GA7FmB,GA6Fb,MAAM;AACV,UAAIrC,CAAC,GACH,KAAKK,KAAL,CAAWsB,KAAX,CAAiBjB,MAAjB,KAA4B,CAA5B,GACI,KAAKL,KAAL,CAAWsB,KAAX,CACGM,GADH,CACOR,CAAC,IAAI;AACR,eAAO,KAAKpB,KAAL,CAAWyB,cAAX,CAA0BL,CAA1B,EAA6BS,QAApC;AACD,OAHH,EAIGM,MAJH,CAIU,KAAKC,SAJf,CADJ,GAMI,CAPN;AAQA,WAAK9B,QAAL,CAAc;AAAEuB,QAAAA,QAAQ,EAAElC;AAAZ,OAAd;AACD,KAvGkB;;AAAA,SAwGnB0C,MAxGmB,GAwGV,MAAMvB,CAAN,IAAW;AAClB,UAAIwB,IAAI,GAAGxB,CAAC,CAACC,MAAF,CAASX,EAApB;AACA,UAAImC,GAAG,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKzC,KAAL,CAAWyB,cAA7B,CAAV;AACA,aAAOc,GAAG,CAACD,IAAD,CAAV;AACA,YAAM,KAAKhC,QAAL,CAAc;AAAEgB,QAAAA,KAAK,EAAE,KAAKtB,KAAL,CAAWsB,KAAX,CAAiBH,MAAjB,CAAwBC,CAAC,IAAIA,CAAC,KAAKkB,IAAnC;AAAT,OAAd,CAAN;AACA,YAAM,KAAKhC,QAAL,CAAc;AAAEmB,QAAAA,cAAc,EAAEc;AAAlB,OAAd,CAAN;AACA,YAAM,KAAKP,GAAL,EAAN;AACD,KA/GkB;;AAAA,SAgHnBI,SAhHmB,GAgHP,CAACzC,CAAD,EAAIe,CAAJ,KAAUf,CAAC,GAAGe,CAhHP;;AAAA,SAiHnBgC,MAjHmB,GAiHV5B,CAAC,IAAI;AACZ,UAAImB,IAAI,GAAG,EAAX;AACA,WAAKjC,KAAL,CAAWC,QAAX,CACGkB,MADH,CACUC,CAAC,IAAIA,CAAC,CAACC,IAAF,CAAOsB,WAAP,GAAqBpB,QAArB,CAA8BT,CAAC,CAACC,MAAF,CAASC,KAAvC,CADf,EAEGY,GAFH,CAEOR,CAAC,IAAI;AACR,eAAOa,IAAI,CAAC/B,IAAL,CAAUkB,CAAV,CAAP;AACD,OAJH;AAKAN,MAAAA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeX,MAAf,KAA0B,CAA1B,IAA+B,KAAKC,QAAL,CAAc;AAAE2B,QAAAA,IAAI,EAAEA;AAAR,OAAd,CAA/B;AACAnB,MAAAA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAeX,MAAf,KAA0B,CAA1B,IAA+B,KAAKC,QAAL,CAAc;AAAE2B,QAAAA,IAAI,EAAE;AAAR,OAAd,CAA/B;AACD,KA1HkB;;AAEjB,SAAKjC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE,EADC;AAEXwB,MAAAA,cAAc,EAAE,EAFL;AAGXH,MAAAA,KAAK,EAAE,EAHI;AAIXO,MAAAA,QAAQ,EAAE,CAJC;AAKXtB,MAAAA,SAAS,EAAE,YALA;AAMX0B,MAAAA,IAAI,EAAE;AANK,KAAb;AAQD;;AACDW,EAAAA,iBAAiB,GAAG;AAClB,SAAKpD,KAAL,CAAWqD,QAAX,CAAoB7C,KAApB,IACE,KAAKM,QAAL,CAAc;AACZmB,MAAAA,cAAc,EAAE,KAAKjC,KAAL,CAAWqD,QAAX,CAAoB7C,KAApB,CAA0ByB,cAD9B;AAEZH,MAAAA,KAAK,EAAE,KAAK9B,KAAL,CAAWqD,QAAX,CAAoB7C,KAApB,CAA0BsB,KAFrB;AAGZO,MAAAA,QAAQ,EAAE,KAAKrC,KAAL,CAAWqD,QAAX,CAAoB7C,KAApB,CAA0B6B;AAHxB,KAAd,CADF;AAMA,SAAKnC,SAAL;AACD;;AAwGDoD,EAAAA,MAAM,GAAG;AACP,WACE,oBAAC,QAAD;AACE,MAAA,KAAK,EAAE,KAAK9C,KADd;AAEE,MAAA,GAAG,EAAE,KAAKiB,GAFZ;AAGE,MAAA,GAAG,EAAE,KAAKe,GAHZ;AAIE,MAAA,MAAM,EAAE,KAAKK,MAJf;AAKE,MAAA,GAAG,EAAE,KAAKxB,GALZ;AAME,MAAA,MAAM,EAAE,KAAK6B,MANf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAUD;;AAvIqC;;AA0IxC,eAAerD,SAAf","sourcesContent":["import React from 'react';\r\nimport { fetch } from '../../Fetches';\r\nimport Homepage from '../Layouts/Homepage';\r\n\r\nclass Dashboard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      products: [],\r\n      selected_items: [],\r\n      items: [],\r\n      totPrice: 0,\r\n      isloading: 'Loading...',\r\n      list: []\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    this.props.location.state &&\r\n      this.setState({\r\n        selected_items: this.props.location.state.selected_items,\r\n        items: this.props.location.state.items,\r\n        totPrice: this.props.location.state.totPrice\r\n      });\r\n    this.fetchData();\r\n  }\r\n  check = () => {\r\n    this.fetchData();\r\n  };\r\n  fetchData = async () => {\r\n    let a = await fetch();\r\n    await console.log('fetch_over');\r\n    await a.forEach(async doc => {\r\n      await this.state.products.push({ ...doc.data(), id: doc.id });\r\n    });\r\n    (await this.state.products.length) !== 0 &&\r\n      this.setState({ isloading: '' });\r\n    let srt = await this.state.products.sort((a, b) => a.Avail - b.Avail);\r\n    await this.setState({ products: srt });\r\n    (await a.size) === 0 && this.setState({ isloading: 'serverError' });\r\n    (await this.state.isloading) === 'serverError' && this.check();\r\n  };\r\n  one = async e => {\r\n    let { value, id } = e.target;\r\n    console.log(value, id);\r\n    // if (\r\n    //   this.state.selected_items[name].req + num >\r\n    //   this.state.products.filter(i => i.Name === name).map(i => i.Avail)[0]\r\n    // ) {\r\n    //   alert('Quantity Exceeded');\r\n    // } else if (!(this.state.selected_items[name].req + num < 0)) {\r\n    //   if (this.state.selected_items[name].req + num === 0) {\r\n    //     this.delete(e);\r\n    //   }\r\n    //   let a = Object.assign({}, this.state.selected_items, {\r\n    //     ...this.state.selected_items,\r\n    //     [name]: {\r\n    //       ...this.state.selected_items[name],\r\n    //       req: this.state.selected_items[name].req + num,\r\n    //       totPrice:\r\n    //         +this.state.products\r\n    //           .filter(i => i.Name === name)\r\n    //           .map(i => i.Price)[0] *\r\n    //         (this.state.selected_items[name].req + num)\r\n    //     }\r\n    //   });\r\n    //   await this.setState({ selected_items: a });\r\n    //   await this.tot();\r\n    // }\r\n  };\r\n  add = async e => {\r\n    let a = await e.target.id;\r\n    let item = await this.state.products.filter(i => i.Name === a);\r\n    if (a !== '' && item[0].Avail > 0) {\r\n      if (!this.state.items.includes(a)) {\r\n        this.setState(prev => {\r\n          return {\r\n            selected_items: {\r\n              ...prev.selected_items,\r\n              [a]: {\r\n                req: 1,\r\n                totavail: +item.map(i => i.Avail)[0],\r\n                id: this.state.products\r\n                  .filter(i => i.Name === a)\r\n                  .map(i => i.id)[0],\r\n                totPrice: +item.map(i => i.Price)[0],\r\n                price: +item.map(i => i.Price)[0]\r\n              }\r\n            }\r\n          };\r\n        });\r\n        await this.setState({\r\n          items: [...this.state.items, a]\r\n        });\r\n        await this.tot();\r\n        await this.setState({ list: [] });\r\n      }\r\n    } else alert('select valid product');\r\n  };\r\n  tot = () => {\r\n    let a =\r\n      this.state.items.length !== 0\r\n        ? this.state.items\r\n            .map(i => {\r\n              return this.state.selected_items[i].totPrice;\r\n            })\r\n            .reduce(this.summation)\r\n        : 0;\r\n    this.setState({ totPrice: a });\r\n  };\r\n  delete = async e => {\r\n    let name = e.target.id;\r\n    let res = Object.assign({}, this.state.selected_items);\r\n    delete res[name];\r\n    await this.setState({ items: this.state.items.filter(i => i !== name) });\r\n    await this.setState({ selected_items: res });\r\n    await this.tot();\r\n  };\r\n  summation = (a, b) => a + b;\r\n  search = e => {\r\n    let list = [];\r\n    this.state.products\r\n      .filter(i => i.Name.toLowerCase().includes(e.target.value))\r\n      .map(i => {\r\n        return list.push(i);\r\n      });\r\n    e.target.value.length !== 0 && this.setState({ list: list });\r\n    e.target.value.length === 0 && this.setState({ list: [] });\r\n  };\r\n  render() {\r\n    return (\r\n      <Homepage\r\n        state={this.state}\r\n        add={this.add}\r\n        tot={this.tot}\r\n        delete={this.delete}\r\n        one={this.one}\r\n        search={this.search}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Dashboard;\r\n"]},"metadata":{},"sourceType":"module"}